<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h1>로그인 페이지</h1>
    <label for="">아이디</label>
    <input type="text" id="user_id" /><br /><br />

    <label for="">비밀번호</label>
    <input type="text" id="user_pw" /><br /><br />

    <button id="btn">로그인하기</button>
  </body>
  <script>
    btn.onclick = () => {
      const form = new FormData();
      form.append("user_id1", user_id.value);
      form.append("user_pw1", user_pw.value);

      axios
        .post("http://127.0.0.1:8000/upload/login", form, {
          headers : { "Content-Type": "multipart/form-data" },
          withCredentials: true,
        })
        .then((e) => {
          // console.log("e ::: ", e);
          // console.log("e ::: ", e.data);
          if (e.data == 1) {
            // axios.post("http://127.0.0.1:8000/upload/profile");
            // const data1 = axios.get(`http://127.0.0.1:8000/upload/profile/${user_id.value}`, {
            //   withCredentials: true,
            // });

            window.location.href=  `./profile.html`;
          } else {
            alert("아이디 혹은 비밀번호 틀림");
            window.location.href = `./login.html`;
          }
        })
        .catch((err) => {
          console.log(err);
        });
    };
  </script>
</html>
